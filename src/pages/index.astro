---
import Container from "@/components/Container.astro";
import { SITE, SOCIAL_MEDIA } from "@/consts";
import Layout from "@/layouts/Layout.astro";
import { getCollection } from "astro:content";
import { format } from "date-fns";

const blog = (await getCollection("blog"))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 5);
---

<Layout
  title={SITE.title}
  description={SITE.description}
  lang="en"
  locale="en_US"
  structuredData={[
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      name: SITE.title,
      url: new URL("/", Astro.site).toString(),
    },
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      name: SITE.title,
      description: SITE.description,
      url: new URL(Astro.url.pathname, Astro.site).toString(),
    },
  ]}
>
  <Container>
    <div class="space-y-8">
      <h1
        class="text-4xl tracking-tight font-bold sm:text-6xl inline-block font-heading"
      >
        Ngô Phú Thịnh
      </h1>
      <div class="space-y-4 text-zinc-400">
        <p class="leading-relaxed">
          Hello! I'm Ngô Phú Thịnh, an enthusiastic indie hacker exploring the
          entrepreneurial path right here in Ho Chi Minh City, Vietnam. My world
          revolves around technology and the joy of learning new things.
        </p>
      </div>
      <section class="mb-16">
        <h2 class="text-accent mb-6 text-xl text-zinc-200">
          <a href="/blog/">Posts</a>
        </h2>
        <ul class="space-y-4" role="list">
          {
            blog.map((post) => (
              <li class="grid gap-2 sm:grid-cols-[auto_1fr]">
                <time
                  datetime={post.data.date.toISOString()}
                  title={post.data.date.toISOString()}
                  class="min-w-30 font-mono font-semibold text-zinc-400"
                >
                  {format(new Date(post.data.date), "dd MMM yyyy")}
                </time>
                <div class="text-zinc-200">
                  {post.data.draft && (
                    <span class="text-yellow-400 font-bold mr-2">[Draft]</span>
                  )}
                  <a data-astro-prefetch="" href={`/blog/${post.id}`}>
                    {post.data.title}
                  </a>
                </div>
              </li>
            ))
          }
        </ul>
      </section>
      <footer
        class="mt-20 border-t border-zinc-800 pt-8 pb-12 text-sm text-zinc-400 text-right"
      >
        <div
          class="flex flex-col gap-3 text-base text-zinc-200 sm:flex-row sm:items-center sm:justify-end sm:gap-6"
        >
          <a
            href="mailto:thinhngow@gmail.com"
            class="transition-colors duration-200 hover:text-white"
          >
            thinhngow@gmail.com
          </a>
          {
            SOCIAL_MEDIA.github && (
              <a
                href={SOCIAL_MEDIA.github}
                target="_blank"
                class="transition-colors duration-200 hover:text-white"
                aria-label="GitHub Profile"
              >
                GitHub
              </a>
            )
          }
        </div>
      </footer>
    </div>
  </Container>
</Layout>
